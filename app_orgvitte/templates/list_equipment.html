{% extends 'base.html' %}

{% block title %}–°–ø–∏—Å–æ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è{% endblock %}

{% block content %}
<h2 class="mb-4">–°–ø–∏—Å–æ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</h2>

<!-- üîΩ –§–æ—Ä–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
<form method="get" class="row g-3 mb-3">
    <div class="col-md-4">
        <input type="text" name="name" class="form-control"
               placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" value="{{ filter_name }}">
    </div>
    <div class="col-md-3">
        <input type="text" name="inventory_number" class="form-control"
               placeholder="–ò–Ω–≤–µ–Ω—Ç–∞—Ä–Ω—ã–π –Ω–æ–º–µ—Ä" value="{{ filter_inventory_number }}">
    </div>
    <div class="col-md-3">
        <select name="status" class="form-select">
            <option value="all" {% if filter_status == "all" %}selected{% endif %}>–í—Å–µ</option>
            <option value="in_use" {% if filter_status == "in_use" %}selected{% endif %}>–í —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏</option>
            <option value="under_repair" {% if filter_status == "under_repair" %}selected{% endif %}>–í —Ä–µ–º–æ–Ω—Ç–µ</option>
            <option value="written_off" {% if filter_status == "written_off" %}selected{% endif %}>–°–ø–∏—Å–∞–Ω–æ</option>
        </select>
    </div>
    <div class="col-md-2 d-flex">
        <button type="submit" class="btn btn-primary me-2 flex-grow-1">–ü–æ–∏—Å–∫</button>
        <a href="{% url 'list_equipment' %}" class="btn btn-secondary flex-grow-1">–°–±—Ä–æ—Å–∏—Ç—å</a>
    </div>
</form>
<!-- üîº –§–æ—Ä–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->

<table class="table table-striped table-bordered bg-white shadow-sm">
    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ò–Ω–≤. –Ω–æ–º–µ—Ä</th>
            <th>–°–æ—Å—Ç–æ—è–Ω–∏–µ</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
    {% for eq in equipment_list %}
        <tr>
            <td>{{ eq.id }}</td>
            <td>{{ eq.name }}</td>
            <td>{{ eq.inventory_number }}</td>
            <td>{{ eq.get_status_display }}</td>
            <td>
                {% if perms.app_orgvitte.change_equipment %}
                    <a href="{% url 'edit_equipment' eq.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è</a>
                {% endif %}

                {% if perms.app_orgvitte.delete_equipment %}
                    <a href="{% url 'delete_equipment' eq.id %}" class="btn btn-danger btn-sm">üóë</a>
                {% endif %}

                {% if perms.app_orgvitte.add_equipmentaction %}
                    <a href="{% url 'add_equipment_action' eq.id %}" class="btn btn-info btn-sm">‚ûï –¥–µ–π—Å—Ç–≤–∏–µ</a>
                {% endif %}

                {% if perms.app_orgvitte.view_equipmentaction %}
                    <a href="{% url 'equipment_actions' eq.id %}" class="btn btn-secondary btn-sm">üìú –∏—Å—Ç–æ—Ä–∏—è</a>
                {% endif %}

                {% if perms.app_orgvitte.view_fileupload %}
                      <a href="{% url 'equipment_files' eq.id %}" class="btn btn-dark btn-sm">üìé —Ñ–∞–π–ª—ã</a>
                {% endif %}

            </td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="5" class="text-center">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% if perms.app_orgvitte.add_equipment %}
    <a href="{% url 'add_equipment' %}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</a>

<hr>
<div class="mt-4">
    <h4>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</h4>
    <a href="{% url 'feedback' %}" class="btn btn-outline-primary">‚úâ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</a>
    <a href="{% url 'list_tickets' %}" class="btn btn-outline-warning">üìù –ó–∞—è–≤–∫–∏</a>
    <a href="{% url 'list_articles' %}" class="btn btn-outline-info">üìö –°—Ç–∞—Ç—å–∏ / –°–ø—Ä–∞–≤–∫–∞</a>
</div>
<div class="mt-4">



{% endif %}
{% endblock %}
