{% extends 'base.html' %}

{% block content %}
<h2>История действий для: {{ equipment.name }} ({{ equipment.inventory_number }})</h2>

<table class="table table-striped table-bordered bg-white shadow-sm">
    <thead class="table-dark">
        <tr>
            <th>Дата</th>
            <th>Тип действия</th>
            <th>Описание</th>
            <th>Откуда</th>
            <th>Куда</th>
            <th>Пользователь</th>
        </tr>
    </thead>
    <tbody>
    {% for action in actions %}
        <tr>
            <td>{{ action.date|date:"d.m.Y H:i" }}</td>
            <td>{{ action.get_action_type_display }}</td>
            <td>{{ action.description }}</td>

            {% if action.action_type == 'movement' %}
                <td>{{ action.from_location }}</td>
                <td>{{ action.to_location }}</td>
            {% else %}
                <td colspan="2" class="text-center">—</td>
            {% endif %}

            <td>{{ action.performed_by.username }}</td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="6" class="text-center">Нет действий</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<div class="mt-3">
    <a href="{% url 'list_equipment' %}" class="btn btn-secondary">⬅ Назад к списку оборудования</a>

    {% if perms.app_orgvitte.add_equipmentaction %}
        <a href="{% url 'add_equipment_action' equipment.id %}" class="btn btn-success ms-2">➕ Добавить действие</a>
    {% endif %}
</div>
{% endblock %}
